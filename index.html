<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz des Sourates | ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ≥Ÿàÿ± ÿßŸÑŸÇÿ±ÿ¢ŸÜŸäÿ©</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --correct: #16a34a;
            --incorrect: #dc2626;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --arabic-font: 'Traditional Arabic', 'Arial', sans-serif;
            
            /* Mode sombre */
            --dark-bg: #1e293b;
            --dark-card: #334155;
            --dark-text: #f8fafc;
            --dark-primary: #60a5fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }

        .dark-mode .quiz-container,
        .dark-mode .instructions,
        .dark-mode .score {
            background-color: var(--dark-card);
        }

        .dark-mode .sourate-display {
            background-color: #475569;
        }

        .dark-mode input[type="text"] {
            background-color: #1e293b;
            color: white;
            border-color: #475569;
        }

        .dark-mode button:not(.lang-btn) {
            background-color: var(--dark-primary);
        }

        .dark-mode button:not(.lang-btn):hover {
            background-color: #3b82f6;
        }

        .dark-mode .language-switcher {
            background-color: #475569;
        }

        .dark-mode .lang-btn:not(.active) {
            color: var(--dark-text);
        }

        .dark-mode .progress-container {
            background-color: #475569;
        }

        .rtl {
            direction: rtl;
            text-align: right;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        h1 {
            color: var(--primary);
            margin: 0;
            font-size: 1.8rem;
        }

        .dark-mode h1 {
            color: var(--dark-primary);
        }

        h2 {
            color: var(--text);
            margin: 0.5rem 0 1.5rem;
            font-size: 1.3rem;
            font-weight: 500;
        }

        .dark-mode h2 {
            color: var(--dark-text);
        }

        .language-switcher {
            display: flex;
            gap: 0.5rem;
            background: #e2e8f0;
            padding: 0.3rem;
            border-radius: 50px;
        }

        .lang-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: var(--text);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: var(--primary);
            color: white;
        }

        .dark-mode .lang-btn.active {
            background: var(--dark-primary);
        }

        .quiz-container {
            background-color: var(--card);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            display: none;
        }

        .sourate-display {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 1.5rem 0;
            padding: 1rem;
            background-color: #f1f5f9;
            border-radius: 8px;
            color: var(--primary);
        }

        .dark-mode .sourate-display {
            color: var(--dark-primary);
        }

        .sourate-arabic {
            font-family: var(--arabic-font);
            font-size: 2rem;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .sourate-latin {
            font-size: 1.2rem;
            color: #64748b;
        }

        .dark-mode .sourate-latin {
            color: #94a3b8;
        }

        .question {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        .dark-mode label {
            color: var(--dark-text);
        }

        input[type="text"] {
            width: 100%;
            padding: 0.8rem;
            margin: 0.3rem 0 1rem;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
            transition: border 0.2s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .dark-mode input[type="text"]:focus {
            border-color: var(--dark-primary);
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.3);
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: var(--primary-dark);
        }

        button:disabled {
            background-color: #94a3b8;
            cursor: not-allowed;
        }

        .dark-mode button:disabled {
            background-color: #64748b;
        }

        .result {
            margin-top: 0.8rem;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 1rem;
        }

        .correct {
            background-color: #dcfce7;
            color: var(--correct);
            border-left: 4px solid var(--correct);
        }

        .dark-mode .correct {
            background-color: #166534;
            color: #86efac;
        }

        .incorrect {
            background-color: #fee2e2;
            color: var(--incorrect);
            border-left: 4px solid var(--incorrect);
        }

        .dark-mode .incorrect {
            background-color: #7f1d1d;
            color: #fca5a5;
        }

        .score {
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            margin: 1.5rem 0;
            padding: 1rem;
            background-color: #e0f2fe;
            border-radius: 8px;
            color: var(--primary);
            display: none;
        }

        .dark-mode .score {
            background-color: #1e40af;
            color: var(--dark-text);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .instructions {
            background-color: #e0f2fe;
            padding: 1.2rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .dark-mode .instructions {
            background-color: #1e40af;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            display: none;
        }

        .dark-mode .progress-container {
            background-color: #475569;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            width: 0%;
            transition: width 0.4s ease;
        }

        .dark-mode .progress-bar {
            background-color: var(--dark-primary);
        }

        .sourate-info {
            background-color: #f1f5f9;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .dark-mode .sourate-info {
            background-color: #475569;
        }

        .sourate-info-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .dark-mode .sourate-info-title {
            color: var(--dark-primary);
        }

        .hadith-box {
            background-color: #ecfdf5;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid var(--correct);
            font-style: italic;
        }

        .dark-mode .hadith-box {
            background-color: #064e3b;
            border-left-color: #34d399;
        }

        .hadith-arabic {
            font-family: var(--arabic-font);
            font-size: 1.2rem;
            text-align: right;
            margin-bottom: 0.5rem;
        }

        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .dark-mode .theme-toggle {
            background: var(--dark-primary);
        }

        @media (max-width: 640px) {
            body {
                padding: 1rem;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            h2 {
                font-size: 1.1rem;
            }
            
            .sourate-display {
                font-size: 1.2rem;
                padding: 0.8rem;
            }
            
            .sourate-arabic {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" id="themeToggle">üåô</button>
    
    <div class="header">
        <div>
            <h1 id="title">Quiz des Sourates du Coran</h1>
            <h2 id="subtitle">De An-Naba (78) √† An-Nas (114)</h2>
        </div>
        <div class="language-switcher">
            <button class="lang-btn active" id="frBtn">Fran√ßais</button>
            <button class="lang-btn" id="arBtn">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
        </div>
    </div>
    
    <div class="instructions" id="instructions">
        <p><strong id="instructions-title">Instructions :</strong></p>
        <ul id="instructions-list">
            <li id="instruction1">Pour chaque sourate affich√©e, indiquez quelle sourate vient <strong>apr√®s</strong> (num√©ro inf√©rieur)</li>
            <li id="instruction2">Et quelle sourate vient <strong>avant</strong> (num√©ro sup√©rieur)</li>
        </ul>
        <p id="instruction-text">Vous pouvez r√©pondre en fran√ßais ou en arabe. Cliquez sur "Commencer" pour d√©marrer.</p>
    </div>
    
    <div class="progress-container" id="progressContainer">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="controls">
        <button id="startBtn">Commencer</button>
        <button id="restartBtn" style="display: none;">Recommencer</button>
        <button id="nextBtn" disabled>Suivant</button>
    </div>
    
    <div id="quizContainer" class="quiz-container">
        <div id="sourateDisplay" class="sourate-display">
            <div class="sourate-arabic" id="sourateArabic"></div>
            <div class="sourate-latin" id="sourateLatin"></div>
        </div>
        
        <div id="sourateInfo" class="sourate-info">
            <div class="sourate-info-title" id="infoTitle">Informations sur la sourate</div>
            <div id="sourateDetails"></div>
        </div>
        
        <div id="hadithBox" class="hadith-box">
            <div class="hadith-arabic" id="hadithArabic"></div>
            <div id="hadithTranslation"></div>
        </div>
        
        <div class="question">
            <label for="prevInput" id="prevLabel">Sourate qui vient <strong>apr√®s</strong> :</label>
            <input type="text" id="prevInput" dir="auto" placeholder="Nom de la sourate...">
            <div id="prevResult" class="result"></div>
        </div>
        
        <div class="question">
            <label for="nextInput" id="nextLabel">Sourate qui vient <strong>avant</strong> :</label>
            <input type="text" id="nextInput" dir="auto" placeholder="Nom de la sourate...">
            <div id="nextResult" class="result"></div>
        </div>
    </div>
    
    <div id="scoreDisplay" class="score"></div>

    <script>
        // ==================== CONFIGURATION ====================
        const translations = {
            fr: {
                title: "Quiz des Sourates du Coran",
                subtitle: "De An-Naba (78) √† An-Nas (114)",
                instructionsTitle: "Instructions :",
                instruction1: "Pour chaque sourate affich√©e, indiquez quelle sourate vient <strong>apr√®s</strong> (num√©ro inf√©rieur)",
                instruction2: "Et quelle sourate vient <strong>avant</strong> (num√©ro sup√©rieur)",
                instructionText: "Vous pouvez r√©pondre en fran√ßais ou en arabe. Cliquez sur \"Commencer\" pour d√©marrer.",
                prevLabel: "Sourate qui vient <strong>apr√®s</strong> :",
                nextLabel: "Sourate qui vient <strong>avant</strong> :",
                startBtn: "Commencer",
                restartBtn: "Recommencer",
                nextBtn: "Suivant",
                correct: "‚úÖ Correct !",
                incorrect: "‚ùå Incorrect.",
                after: "Apr√®s",
                before: "Avant",
                comes: "vient",
                lastSourate: "est la derni√®re sourate (An-Nas).",
                firstSourate: "est la premi√®re sourate (An-Naba).",
                score: "Score :",
                quizFinished: "Quiz termin√© ! Score final :",
                placeholder: "Nom de la sourate...",
                infoTitle: "Informations sur la sourate",
                themeToggle: {
                    light: "üåô",
                    dark: "‚òÄÔ∏è"
                }
            },
            ar: {
                title: "ÿßÿÆÿ™ÿ®ÿßÿ± ÿ™ÿ±ÿ™Ÿäÿ® ÿ≥Ÿàÿ± ÿßŸÑŸÇÿ±ÿ¢ŸÜ",
                subtitle: "ŸÖŸÜ ÿ≥Ÿàÿ±ÿ© ÿßŸÑŸÜÿ®ÿ£ (ŸßŸ®) ÿ•ŸÑŸâ ÿßŸÑŸÜÿßÿ≥ (Ÿ°Ÿ°Ÿ§)",
                instructionsTitle: "ÿßŸÑÿ™ÿπŸÑŸäŸÖÿßÿ™:",
                instruction1: "ŸÑŸÉŸÑ ÿ≥Ÿàÿ±ÿ© ŸÖÿπÿ±Ÿàÿ∂ÿ©ÿå ÿ≠ÿØÿØ ÿßŸÑÿ≥Ÿàÿ±ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ£ÿ™Ÿä <strong>ÿ®ÿπÿØŸáÿß</strong> (ÿ±ŸÇŸÖ ÿ£ŸÇŸÑ)",
                instruction2: "ŸàÿßŸÑÿ≥Ÿàÿ±ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ£ÿ™Ÿä <strong>ŸÇÿ®ŸÑŸáÿß</strong> (ÿ±ŸÇŸÖ ÿ£ÿπŸÑŸâ)",
                instructionText: "ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿ£Ÿà ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ©. ÿßŸÜŸÇÿ± ÿπŸÑŸâ \"ÿßÿ®ÿØÿ£\" ŸÑŸÑÿ®ÿØÿ°.",
                prevLabel: "ÿßŸÑÿ≥Ÿàÿ±ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ£ÿ™Ÿä <strong>ÿ®ÿπÿØ</strong> :",
                nextLabel: "ÿßŸÑÿ≥Ÿàÿ±ÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ£ÿ™Ÿä <strong>ŸÇÿ®ŸÑ</strong> :",
                startBtn: "ÿßÿ®ÿØÿ£",
                restartBtn: "ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ®ÿØÿ°",
                nextBtn: "ÿßŸÑÿ™ÿßŸÑŸä",
                correct: "‚úÖ ÿµÿ≠Ÿäÿ≠!",
                incorrect: "‚ùå ÿÆÿ∑ÿ£!",
                after: "ÿ®ÿπÿØ",
                before: "ŸÇÿ®ŸÑ",
                comes: "ÿ™ÿ£ÿ™Ÿä",
                lastSourate: "ŸáŸä ÿ¢ÿÆÿ± ÿ≥Ÿàÿ±ÿ© (ÿßŸÑŸÜÿßÿ≥).",
                firstSourate: "ŸáŸä ÿ£ŸàŸÑ ÿ≥Ÿàÿ±ÿ© (ÿßŸÑŸÜÿ®ÿ£).",
                score: "ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© :",
                quizFinished: "ÿßŸÜÿ™ŸáŸâ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±! ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© :",
                placeholder: "ÿßÿ≥ŸÖ ÿßŸÑÿ≥Ÿàÿ±ÿ©...",
                infoTitle: "ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿπŸÜ ÿßŸÑÿ≥Ÿàÿ±ÿ©",
                themeToggle: {
                    light: "üåô",
                    dark: "‚òÄÔ∏è"
                }
            }
        };

        const sourates = [
            {num: 114, name: "An-Nas", arabic: "ÿßŸÑŸÜÿßÿ≥", info: {fr: "Derni√®re sourate du Coran. Elle traite de la recherche de protection aupr√®s d'Allah contre les mauvaises suggestions.", ar: "ÿ¢ÿÆÿ± ÿ≥Ÿàÿ±ÿ© ŸÅŸä ÿßŸÑŸÇÿ±ÿ¢ŸÜ. ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿßŸÑÿßÿ≥ÿ™ÿπÿßÿ∞ÿ© ÿ®ÿßŸÑŸÑŸá ŸÖŸÜ Ÿàÿ≥ÿßŸàÿ≥ ÿßŸÑÿ¥Ÿäÿ∑ÿßŸÜ."}},
            {num: 113, name: "Al-Falaq", arabic: "ÿßŸÑŸÅŸÑŸÇ", info: {fr: "Sourate de protection contre le mal sous toutes ses formes.", ar: "ÿ≥Ÿàÿ±ÿ© ŸÑŸÑÿßÿ≥ÿ™ÿπÿßÿ∞ÿ© ÿ®ÿßŸÑŸÑŸá ŸÖŸÜ ÿßŸÑÿ¥ÿ±Ÿàÿ± ÿ®ŸÉŸÑ ÿ£ÿ¥ŸÉÿßŸÑŸáÿß."}},
            {num: 112, name: "Al-Ikhlas", arabic: "ÿßŸÑÿ•ÿÆŸÑÿßÿµ", info: {fr: "Elle r√©sume le concept de Tawhid (l'unicit√© d'Allah). √âquivalente au tiers du Coran.", ar: "ÿ™ÿÆÿ™ÿµÿ± ŸÖŸÅŸáŸàŸÖ ÿßŸÑÿ™Ÿàÿ≠ŸäÿØ. ÿ™ÿπÿØŸÑ ÿ´ŸÑÿ´ ÿßŸÑŸÇÿ±ÿ¢ŸÜ."}},
            {num: 111, name: "Al-Masad", arabic: "ÿßŸÑŸÖÿ≥ÿØ", info: {fr: "Traite du ch√¢timent d'Abu Lahab et de sa femme pour leur opposition au Proph√®te.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿπÿ∞ÿßÿ® ÿ£ÿ®Ÿä ŸÑŸáÿ® Ÿàÿ≤Ÿàÿ¨ÿ™Ÿá ŸÑŸÖÿπÿßÿ±ÿ∂ÿ™ŸáŸÖÿß ÿßŸÑÿ±ÿ≥ŸàŸÑ."}},
            {num: 110, name: "An-Nasr", arabic: "ÿßŸÑŸÜÿµÿ±", info: {fr: "Annonce la victoire de l'Islam et la conqu√™te de La Mecque.", ar: "ÿ™ÿ®ÿ¥ÿ± ÿ®ŸÜÿµÿ± ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖ ŸàŸÅÿ™ÿ≠ ŸÖŸÉÿ©."}},
            {num: 109, name: "Al-Kafirun", arabic: "ÿßŸÑŸÉÿßŸÅÿ±ŸàŸÜ", info: {fr: "√âtablit une s√©paration claire entre la foi et la m√©cr√©ance.", ar: "ÿ™ŸÅÿµŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ•ŸäŸÖÿßŸÜ ŸàÿßŸÑŸÉŸÅÿ±."}},
            {num: 108, name: "Al-Kawthar", arabic: "ÿßŸÑŸÉŸàÿ´ÿ±", info: {fr: "La plus courte sourate. Promet l'abondance au Proph√®te.", ar: "ÿ£ŸÇÿµÿ± ÿ≥Ÿàÿ±ÿ©. ÿ™ÿ®ÿ¥ÿ± ÿßŸÑÿ±ÿ≥ŸàŸÑ ÿ®ÿßŸÑÿÆŸäÿ± ÿßŸÑŸàŸÅŸäÿ±."}},
            {num: 107, name: "Al-Ma'un", arabic: "ÿßŸÑŸÖÿßÿπŸàŸÜ", info: {fr: "D√©crit les caract√©ristiques de ceux qui renient la religion.", ar: "ÿ™ÿµŸÅ ÿµŸÅÿßÿ™ ÿßŸÑÿ∞ŸäŸÜ ŸäŸÉÿ∞ÿ®ŸàŸÜ ÿ®ÿßŸÑÿØŸäŸÜ."}},
            {num: 106, name: "Quraish", arabic: "ŸÇÿ±Ÿäÿ¥", info: {fr: "Rappelle les bienfaits d'Allah sur la tribu de Quraych.", ar: "ÿ™ÿ∞ŸÉÿ± ÿ®ŸÜÿπŸÖ ÿßŸÑŸÑŸá ÿπŸÑŸâ ŸÇÿ®ŸäŸÑÿ© ŸÇÿ±Ÿäÿ¥."}},
            {num: 105, name: "Al-Fil", arabic: "ÿßŸÑŸÅŸäŸÑ", info: {fr: "Raconte l'histoire de l'arm√©e de l'√©l√©phant qui voulait d√©truire la Kaaba.", ar: "ÿ™ÿ≠ŸÉŸä ŸÇÿµÿ© ÿ£ÿµÿ≠ÿßÿ® ÿßŸÑŸÅŸäŸÑ ÿßŸÑÿ∞ŸäŸÜ ÿ£ÿ±ÿßÿØŸàÿß ŸáÿØŸÖ ÿßŸÑŸÉÿπÿ®ÿ©."}},
            {num: 104, name: "Al-Humaza", arabic: "ÿßŸÑŸáŸÖÿ≤ÿ©", info: {fr: "Avertit contre les m√©faits de la calomnie et de la moquerie.", ar: "ÿ™ÿ≠ÿ∞ÿ± ŸÖŸÜ ÿ¢ŸÅÿßÿ™ ÿßŸÑÿßÿ∫ÿ™Ÿäÿßÿ® ŸàÿßŸÑÿ≥ÿÆÿ±Ÿäÿ©."}},
            {num: 103, name: "Al-Asr", arabic: "ÿßŸÑÿπÿµÿ±", info: {fr: "Une des sourates les plus courtes. Insiste sur la foi et les bonnes actions.", ar: "ŸÖŸÜ ÿ£ŸÇÿµÿ± ÿßŸÑÿ≥Ÿàÿ±. ÿ™ÿ§ŸÉÿØ ÿπŸÑŸâ ÿßŸÑÿ•ŸäŸÖÿßŸÜ ŸàÿßŸÑÿπŸÖŸÑ ÿßŸÑÿµÿßŸÑÿ≠."}},
            {num: 102, name: "At-Takathur", arabic: "ÿßŸÑÿ™ŸÉÿßÿ´ÿ±", info: {fr: "Met en garde contre l'obsession des biens mat√©riels.", ar: "ÿ™ÿ≠ÿ∞ÿ± ŸÖŸÜ ÿßŸÑÿßŸÜÿ¥ÿ∫ÿßŸÑ ÿ®ÿßŸÑÿ™ŸÜÿßŸÅÿ≥ ŸÅŸä ÿßŸÑÿØŸÜŸäÿß."}},
            {num: 101, name: "Al-Qari'a", arabic: "ÿßŸÑŸÇÿßÿ±ÿπÿ©", info: {fr: "D√©crit les √©v√©nements terrifiants du Jour du Jugement.", ar: "ÿ™ÿµŸÅ ÿ£ÿ≠ÿØÿßÿ´ ŸäŸàŸÖ ÿßŸÑŸÇŸäÿßŸÖÿ© ÿßŸÑŸÖÿÆŸäŸÅÿ©."}},
            {num: 100, name: "Al-Adiyat", arabic: "ÿßŸÑÿπÿßÿØŸäÿßÿ™", info: {fr: "√âvoque les chevaux de guerre et l'ingratitude de l'homme.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿÆŸäŸÑ ÿßŸÑÿ¨ŸáÿßÿØ Ÿàÿ¨ÿ≠ŸàÿØ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ."}},
            {num: 99, name: "Az-Zalzala", arabic: "ÿßŸÑÿ≤ŸÑÿ≤ŸÑÿ©", info: {fr: "D√©crit le tremblement de terre du Jour du Jugement.", ar: "ÿ™ÿµŸÅ ÿ≤ŸÑÿ≤ŸÑÿ© ŸäŸàŸÖ ÿßŸÑŸÇŸäÿßŸÖÿ©."}},
            {num: 98, name: "Al-Bayyina", arabic: "ÿßŸÑÿ®ŸäŸÜÿ©", info: {fr: "Parle de la mission du Proph√®te et du Livre clair.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ±ÿ≥ŸàŸÑ ŸàÿßŸÑŸÉÿ™ÿßÿ® ÿßŸÑŸÖÿ®ŸäŸÜ."}},
            {num: 97, name: "Al-Qadr", arabic: "ÿßŸÑŸÇÿØÿ±", info: {fr: "D√©crit la nuit du Destin (Laylat al-Qadr), meilleure que mille mois.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ŸÑŸäŸÑÿ© ÿßŸÑŸÇÿØÿ± ÿßŸÑÿ™Ÿä ŸáŸä ÿÆŸäÿ± ŸÖŸÜ ÿ£ŸÑŸÅ ÿ¥Ÿáÿ±."}},
            {num: 96, name: "Al-Alaq", arabic: "ÿßŸÑÿπŸÑŸÇ", info: {fr: "Premi√®re sourate r√©v√©l√©e au Proph√®te. Commande la lecture au nom d'Allah.", ar: "ÿ£ŸàŸÑ ÿ≥Ÿàÿ±ÿ© ŸÜÿ≤ŸÑÿ™ ÿπŸÑŸâ ÿßŸÑÿ±ÿ≥ŸàŸÑ. ÿ™ÿ£ŸÖÿ± ÿ®ÿßŸÑŸÇÿ±ÿßÿ°ÿ© ÿ®ÿßÿ≥ŸÖ ÿßŸÑŸÑŸá."}},
            {num: 95, name: "At-Tin", arabic: "ÿßŸÑÿ™ŸäŸÜ", info: {fr: "Parle de la cr√©ation de l'homme dans la meilleure forme.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿÆŸÑŸÇ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ ŸÅŸä ÿ£ÿ≠ÿ≥ŸÜ ÿ™ŸÇŸàŸäŸÖ."}},
            {num: 94, name: "Ash-Sharh", arabic: "ÿßŸÑÿ¥ÿ±ÿ≠", info: {fr: "Console le Proph√®te et promet la facilit√© apr√®s la difficult√©.", ar: "ÿ™ÿ≥ŸÑŸä ŸÑŸÑÿ±ÿ≥ŸàŸÑ Ÿàÿ™ÿ®ÿ¥ÿ± ÿ®ÿßŸÑŸäÿ≥ÿ± ÿ®ÿπÿØ ÿßŸÑÿπÿ≥ÿ±."}},
            {num: 93, name: "Ad-Duha", arabic: "ÿßŸÑÿ∂ÿ≠Ÿâ", info: {fr: "Console le Proph√®te apr√®s une p√©riode sans r√©v√©lation.", ar: "ÿ™ÿ≥ŸÑŸä ŸÑŸÑÿ±ÿ≥ŸàŸÑ ÿ®ÿπÿØ ÿßŸÜŸÇÿ∑ÿßÿπ ÿßŸÑŸàÿ≠Ÿä."}},
            {num: 92, name: "Al-Layl", arabic: "ÿßŸÑŸÑŸäŸÑ", info: {fr: "Contraste les chemins du bien et du mal.", ar: "ÿ™ŸÇÿßÿ±ŸÜ ÿ®ŸäŸÜ ÿ∑ÿ±ŸäŸÇ ÿßŸÑÿÆŸäÿ± Ÿàÿ∑ÿ±ŸäŸÇ ÿßŸÑÿ¥ÿ±."}},
            {num: 91, name: "Ash-Shams", arabic: "ÿßŸÑÿ¥ŸÖÿ≥", info: {fr: "Utilise des serments cosmiques pour enseigner la moralit√©.", ar: "ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑŸÉŸàŸÜŸä ŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ£ÿÆŸÑÿßŸÇ."}},
            {num: 90, name: "Al-Balad", arabic: "ÿßŸÑÿ®ŸÑÿØ", info: {fr: "Parle des difficult√©s de la vie et de la r√©compense des bonnes actions.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ŸÖÿ¥ÿßŸÇ ÿßŸÑÿ≠Ÿäÿßÿ© Ÿàÿ¨ÿ≤ÿßÿ° ÿßŸÑÿπŸÖŸÑ ÿßŸÑÿµÿßŸÑÿ≠."}},
            {num: 89, name: "Al-Fajr", arabic: "ÿßŸÑŸÅÿ¨ÿ±", info: {fr: "√âvoque le sort des peuples anciens et l'√©preuve des biens.", ar: "ÿ™ÿ∞ŸÉÿ± ŸÖÿµŸäÿ± ÿßŸÑÿ£ŸÖŸÖ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© Ÿàÿßÿ®ÿ™ŸÑÿßÿ° ÿßŸÑŸÖÿßŸÑ."}},
            {num: 88, name: "Al-Ghashiya", arabic: "ÿßŸÑÿ∫ÿßÿ¥Ÿäÿ©", info: {fr: "D√©crit les deux groupes au Jour du Jugement.", ar: "ÿ™ÿµŸÅ ÿßŸÑŸÅÿ±ŸäŸÇŸäŸÜ ŸäŸàŸÖ ÿßŸÑŸÇŸäÿßŸÖÿ©."}},
            {num: 87, name: "Al-A'la", arabic: "ÿßŸÑÿ£ÿπŸÑŸâ", info: {fr: "Encourage √† glorifier Allah et promet le succ√®s aux croyants.", ar: "ÿ™ÿ≠ÿ´ ÿπŸÑŸâ ÿ™ÿ≥ÿ®Ÿäÿ≠ ÿßŸÑŸÑŸá Ÿàÿ™ÿ®ÿ¥ÿ± ÿßŸÑŸÖÿ§ŸÖŸÜŸäŸÜ ÿ®ÿßŸÑŸÅŸÑÿßÿ≠."}},
            {num: 86, name: "At-Tariq", arabic: "ÿßŸÑÿ∑ÿßÿ±ŸÇ", info: {fr: "Parle de l'origine de l'homme et de la r√©surrection.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿ£ÿµŸÑ ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ ŸàÿßŸÑÿ®ÿπÿ´."}},
            {num: 85, name: "Al-Buruj", arabic: "ÿßŸÑÿ®ÿ±Ÿàÿ¨", info: {fr: "Mentionne les gens de la tranch√©e et la protection d'Allah.", ar: "ÿ™ÿ∞ŸÉÿ± ÿ£ÿµÿ≠ÿßÿ® ÿßŸÑÿ£ÿÆÿØŸàÿØ Ÿàÿ≠ŸÖÿßŸäÿ© ÿßŸÑŸÑŸá."}},
            {num: 84, name: "Al-Inshiqaq", arabic: "ÿßŸÑÿßŸÜÿ¥ŸÇÿßŸÇ", info: {fr: "D√©crit le ciel se fendant et l'homme rendant compte.", ar: "ÿ™ÿµŸÅ ÿßŸÜÿ¥ŸÇÿßŸÇ ÿßŸÑÿ≥ŸÖÿßÿ° Ÿàÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ."}},
            {num: 83, name: "Al-Mutaffifin", arabic: "ÿßŸÑŸÖÿ∑ŸÅŸÅŸäŸÜ", info: {fr: "Condamne ceux qui trichent dans les mesures.", ar: "ÿ™ŸÜÿØÿØ ÿ®ÿßŸÑÿ∞ŸäŸÜ Ÿäÿ®ÿÆÿ≥ŸàŸÜ ÿßŸÑŸÖŸÉŸäÿßŸÑ."}},
            {num: 82, name: "Al-Infitar", arabic: "ÿßŸÑÿßŸÜŸÅÿ∑ÿßÿ±", info: {fr: "D√©crit le ciel se fendant et les anges enregistrant les actions.", ar: "ÿ™ÿµŸÅ ÿßŸÜŸÅÿ∑ÿßÿ± ÿßŸÑÿ≥ŸÖÿßÿ° ŸàŸÉÿ™ÿßÿ®ÿ© ÿßŸÑŸÖŸÑÿßÿ¶ŸÉÿ© ŸÑŸÑÿ£ÿπŸÖÿßŸÑ."}},
            {num: 81, name: "At-Takwir", arabic: "ÿßŸÑÿ™ŸÉŸàŸäÿ±", info: {fr: "D√©crit les bouleversements cosmiques du Jour dernier.", ar: "ÿ™ÿµŸÅ ÿ£ÿ≠ÿØÿßÿ´ ŸäŸàŸÖ ÿßŸÑŸÇŸäÿßŸÖÿ© ÿßŸÑŸÉŸàŸÜŸäÿ©."}},
            {num: 80, name: "Abasa", arabic: "ÿπÿ®ÿ≥", info: {fr: "Rappelle au Proph√®te de ne pas n√©gliger les pauvres au profit des riches.", ar: "ÿ™ÿ∞ŸÉÿ± ÿßŸÑÿ±ÿ≥ŸàŸÑ ÿ®ÿπÿØŸÖ ÿ•ŸáŸÖÿßŸÑ ÿßŸÑŸÅŸÇÿ±ÿßÿ° ŸÑÿµÿßŸÑÿ≠ ÿßŸÑÿ£ÿ∫ŸÜŸäÿßÿ°."}},
            {num: 79, name: "An-Nazi'at", arabic: "ÿßŸÑŸÜÿßÿ≤ÿπÿßÿ™", info: {fr: "Parle des anges qui arrachent les √¢mes et de la r√©surrection.", ar: "ÿ™ÿ™ÿ≠ÿØÿ´ ÿπŸÜ ÿßŸÑŸÖŸÑÿßÿ¶ŸÉÿ© ÿßŸÑÿ™Ÿä ÿ™ŸÜÿ≤ÿπ ÿßŸÑÿ£ÿ±Ÿàÿßÿ≠ ŸàÿßŸÑÿ®ÿπÿ´."}},
            {num: 78, name: "An-Naba", arabic: "ÿßŸÑŸÜÿ®ÿ£", info: {fr: "Commence par une question sur la grande nouvelle (la r√©surrection).", ar: "ÿ™ÿ®ÿØÿ£ ÿ®ÿ≥ÿ§ÿßŸÑ ÿπŸÜ ÿßŸÑŸÜÿ®ÿ£ ÿßŸÑÿπÿ∏ŸäŸÖ (ÿßŸÑÿ®ÿπÿ´)."}}
        ];

        const hadiths = [
            {
                arabic: "ÿÆŸäÿ±ŸÉŸÖ ŸÖŸÜ ÿ™ÿπŸÑŸÖ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸàÿπŸÑŸÖŸá",
                fr: "Le meilleur d'entre vous est celui qui apprend le Coran et l'enseigne."
            },
            {
                arabic: "ÿßŸÇÿ±ÿ§Ÿàÿß ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸÅÿ•ŸÜŸá Ÿäÿ£ÿ™Ÿä ŸäŸàŸÖ ÿßŸÑŸÇŸäÿßŸÖÿ© ÿ¥ŸÅŸäÿπÿßŸã ŸÑÿ£ÿµÿ≠ÿßÿ®Ÿá",
                fr: "Lisez le Coran car il viendra le Jour de la R√©surrection comme intercesseur pour ceux qui le r√©citaient."
            },
            {
                arabic: "ŸÖŸÜ ŸÇÿ±ÿ£ ÿ≠ÿ±ŸÅÿßŸã ŸÖŸÜ ŸÉÿ™ÿßÿ® ÿßŸÑŸÑŸá ŸÅŸÑŸá ÿ®Ÿá ÿ≠ÿ≥ŸÜÿ©ÿå ŸàÿßŸÑÿ≠ÿ≥ŸÜÿ© ÿ®ÿπÿ¥ÿ± ÿ£ŸÖÿ´ÿßŸÑŸáÿß",
                fr: "Celui qui lit une lettre du Livre d'Allah aura une bonne action, et la bonne action est multipli√©e par dix."
            },
            {
                arabic: "ÿ•ŸÜ ŸÑŸÑŸá ÿ£ŸáŸÑŸäŸÜ ŸÖŸÜ ÿßŸÑŸÜÿßÿ≥: ÿ£ŸáŸÑ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸáŸÖ ÿ£ŸáŸÑ ÿßŸÑŸÑŸá ŸàÿÆÿßÿµÿ™Ÿá",
                fr: "Allah a des gens qu'Il a choisis parmi les hommes : les gens du Coran sont les gens d'Allah et Ses proches."
            },
            {
                arabic: "ŸÖÿß ÿßÿ¨ÿ™ŸÖÿπ ŸÇŸàŸÖ ŸÅŸä ÿ®Ÿäÿ™ ŸÖŸÜ ÿ®ŸäŸàÿ™ ÿßŸÑŸÑŸá Ÿäÿ™ŸÑŸàŸÜ ŸÉÿ™ÿßÿ® ÿßŸÑŸÑŸá ŸàŸäÿ™ÿØÿßÿ±ÿ≥ŸàŸÜŸá ÿ®ŸäŸÜŸáŸÖ ÿ•ŸÑÿß ŸÜÿ≤ŸÑÿ™ ÿπŸÑŸäŸáŸÖ ÿßŸÑÿ≥ŸÉŸäŸÜÿ© Ÿàÿ∫ÿ¥Ÿäÿ™ŸáŸÖ ÿßŸÑÿ±ÿ≠ŸÖÿ© Ÿàÿ≠ŸÅÿ™ŸáŸÖ ÿßŸÑŸÖŸÑÿßÿ¶ŸÉÿ© Ÿàÿ∞ŸÉÿ±ŸáŸÖ ÿßŸÑŸÑŸá ŸÅŸäŸÖŸÜ ÿπŸÜÿØŸá",
                fr: "Quand des gens se r√©unissent dans une mosqu√©e pour r√©citer et √©tudier le Coran, la s√©r√©nit√© descend sur eux, la mis√©ricorde les couvre, les anges les entourent et Allah les mentionne √† ceux qui sont aupr√®s de Lui."
            }
        ];

        // ==================== √âTAT DE L'APPLICATION ====================
        let currentSourate = null;
        let shuffledSourates = [];
        let currentIndex = 0;
        let score = 0;
        let totalQuestions = 0;
        let currentLanguage = 'fr';
        let darkMode = false;

        // ==================== √âL√âMENTS DU DOM ====================
        const elements = {
            title: document.getElementById('title'),
            subtitle: document.getElementById('subtitle'),
            instructionsTitle: document.getElementById('instructions-title'),
            instruction1: document.getElementById('instruction1'),
            instruction2: document.getElementById('instruction2'),
            instructionText: document.getElementById('instruction-text'),
            prevLabel: document.getElementById('prevLabel'),
            nextLabel: document.getElementById('nextLabel'),
            startBtn: document.getElementById('startBtn'),
            restartBtn: document.getElementById('restartBtn'),
            nextBtn: document.getElementById('nextBtn'),
            quizContainer: document.getElementById('quizContainer'),
            sourateArabic: document.getElementById('sourateArabic'),
            sourateLatin: document.getElementById('sourateLatin'),
            prevInput: document.getElementById('prevInput'),
            nextInput: document.getElementById('nextInput'),
            prevResult: document.getElementById('prevResult'),
            nextResult: document.getElementById('nextResult'),
            scoreDisplay: document.getElementById('scoreDisplay'),
            progressContainer: document.getElementById('progressContainer'),
            progressBar: document.getElementById('progressBar'),
            frBtn: document.getElementById('frBtn'),
            arBtn: document.getElementById('arBtn'),
            body: document.body,
            sourateInfo: document.getElementById('sourateInfo'),
            sourateDetails: document.getElementById('sourateDetails'),
            hadithBox: document.getElementById('hadithBox'),
            hadithArabic: document.getElementById('hadithArabic'),
            hadithTranslation: document.getElementById('hadithTranslation'),
            infoTitle: document.getElementById('infoTitle'),
            themeToggle: document.getElementById('themeToggle')
        };

        // ==================== INITIALISATION ====================
        function init() {
            // Masquer les √©l√©ments du quiz au d√©marrage
            elements.quizContainer.style.display = 'none';
            elements.progressContainer.style.display = 'none';
            elements.scoreDisplay.style.display = 'none';
            elements.restartBtn.style.display = 'none';
            
            // Ajouter les √©couteurs d'√©v√©nements
            elements.startBtn.addEventListener('click', startQuiz);
            elements.restartBtn.addEventListener('click', startQuiz);
            elements.nextBtn.addEventListener('click', nextQuestion);
            elements.frBtn.addEventListener('click', () => switchLanguage('fr'));
            elements.arBtn.addEventListener('click', () => switchLanguage('ar'));
            elements.themeToggle.addEventListener('click', toggleDarkMode);
            
            elements.prevInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAnswers();
            });
            
            elements.nextInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAnswers();
            });
            
            // Initialiser en fran√ßais
            switchLanguage('fr');
            
            // Charger le th√®me depuis le localStorage
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                enableDarkMode();
            }
        }

        // ==================== FONCTIONS PRINCIPALES ====================
        function switchLanguage(lang) {
            currentLanguage = lang;
            
            // Mettre √† jour tous les textes
            updateElementText('title', translations[lang].title);
            updateElementText('subtitle', translations[lang].subtitle);
            updateElementText('instructionsTitle', translations[lang].instructionsTitle);
            updateElementHTML('instruction1', translations[lang].instruction1);
            updateElementHTML('instruction2', translations[lang].instruction2);
            updateElementText('instructionText', translations[lang].instructionText);
            updateElementHTML('prevLabel', translations[lang].prevLabel);
            updateElementHTML('nextLabel', translations[lang].nextLabel);
            updateElementText('startBtn', translations[lang].startBtn);
            updateElementText('restartBtn', translations[lang].restartBtn);
            updateElementText('nextBtn', translations[lang].nextBtn);
            updateElementText('infoTitle', translations[lang].infoTitle);
            
            // Mettre √† jour les placeholders
            elements.prevInput.placeholder = translations[lang].placeholder;
            elements.nextInput.placeholder = translations[lang].placeholder;
            
            // Changer la direction du document
            if (lang === 'ar') {
                elements.body.classList.add('rtl');
                elements.frBtn.classList.remove('active');
                elements.arBtn.classList.add('active');
            } else {
                elements.body.classList.remove('rtl');
                elements.frBtn.classList.add('active');
                elements.arBtn.classList.remove('active');
            }
            
            // Mettre √† jour l'affichage de la sourate courante si le quiz est en cours
            if (currentSourate) {
                displayCurrentSourate();
                updateResultsDisplay();
                displaySourateInfo();
                displayRandomHadith();
            }
        }

        function toggleDarkMode() {
            if (darkMode) {
                disableDarkMode();
            } else {
                enableDarkMode();
            }
        }

        function enableDarkMode() {
            elements.body.classList.add('dark-mode');
            darkMode = true;
            elements.themeToggle.textContent = translations[currentLanguage].themeToggle.dark;
            localStorage.setItem('theme', 'dark');
        }

        function disableDarkMode() {
            elements.body.classList.remove('dark-mode');
            darkMode = false;
            elements.themeToggle.textContent = translations[currentLanguage].themeToggle.light;
            localStorage.setItem('theme', 'light');
        }

        function updateElementText(id, text) {
            const element = elements[id];
            if (element) element.textContent = text;
        }

        function updateElementHTML(id, html) {
            const element = elements[id];
            if (element) element.innerHTML = html;
        }

        function startQuiz() {
            // Initialiser le quiz
            shuffledSourates = [...sourates].sort(() => Math.random() - 0.5);
            currentIndex = 0;
            score = 0;
            totalQuestions = 0;
            
            // Afficher les √©l√©ments du quiz
            elements.quizContainer.style.display = 'block';
            elements.progressContainer.style.display = 'block';
            elements.scoreDisplay.style.display = 'none';
            elements.startBtn.style.display = 'none';
            elements.restartBtn.style.display = 'inline-block';
            elements.nextBtn.disabled = false;
            
            // Afficher la premi√®re question
            showQuestion();
        }

        function showQuestion() {
            // R√©initialiser l'interface
            resetQuestionUI();
            
            // Obtenir la sourate courante
            currentSourate = shuffledSourates[currentIndex];
            
            // Afficher la sourate
            displayCurrentSourate();
            
            // Afficher les informations sur la sourate
            displaySourateInfo();
            
            // Afficher un hadith al√©atoire
            displayRandomHadith();
            
            // Activer les champs de saisie
            elements.prevInput.disabled = false;
            elements.nextInput.disabled = false;
            elements.prevInput.focus();
            
            // Mettre √† jour la direction des inputs
            elements.prevInput.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            elements.nextInput.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            
            // Mettre √† jour la barre de progression
            updateProgressBar();
        }

        function displayCurrentSourate() {
            elements.sourateArabic.textContent = currentSourate.arabic;
            elements.sourateLatin.textContent = `${currentSourate.num}. ${currentSourate.name}`;
        }

        function displaySourateInfo() {
            if (currentSourate.info) {
                elements.sourateDetails.textContent = currentSourate.info[currentLanguage];
                elements.sourateInfo.style.display = 'block';
            } else {
                elements.sourateInfo.style.display = 'none';
            }
        }

        function displayRandomHadith() {
            if (hadiths.length > 0) {
                const randomHadith = hadiths[Math.floor(Math.random() * hadiths.length)];
                elements.hadithArabic.textContent = randomHadith.arabic;
                elements.hadithTranslation.textContent = randomHadith.fr;
                elements.hadithBox.style.display = 'block';
            } else {
                elements.hadithBox.style.display = 'none';
            }
        }

        function resetQuestionUI() {
            elements.prevInput.value = '';
            elements.nextInput.value = '';
            elements.prevResult.textContent = '';
            elements.prevResult.className = 'result';
            elements.nextResult.textContent = '';
            elements.nextResult.className = 'result';
        }

        function checkAnswers() {
            // Trouver les sourates adjacentes
            const prevSourate = sourates.find(s => s.num === currentSourate.num + 1);
            const nextSourate = sourates.find(s => s.num === currentSourate.num - 1);
            
            // V√©rifier les r√©ponses
            checkAnswer(elements.prevInput, elements.prevResult, prevSourate, 'after');
            checkAnswer(elements.nextInput, elements.nextResult, nextSourate, 'before');
            
            // D√©sactiver les champs de saisie
            elements.prevInput.disabled = true;
            elements.nextInput.disabled = true;
            
            // Mettre √† jour le score
            updateScore();
        }

        function checkAnswer(inputElement, resultElement, correctSourate, position) {
            const userAnswer = inputElement.value.trim();
            
            if (!correctSourate) {
                const textKey = position === 'after' ? 'lastSourate' : 'firstSourate';
                const text = `${currentLanguage === 'ar' ? currentSourate.arabic : currentSourate.name} ${translations[currentLanguage][textKey]}`;
                resultElement.textContent = text;
                return;
            }
            
            // V√©rifier si la r√©ponse est correcte (en fran√ßais ou en arabe)
            const isCorrect = userAnswer.toLowerCase() === correctSourate.name.toLowerCase() || 
                             userAnswer === correctSourate.arabic;
            
            // Pr√©parer le texte de r√©sultat
            const currentName = currentLanguage === 'ar' ? currentSourate.arabic : currentSourate.name;
            const correctName = currentLanguage === 'ar' ? correctSourate.arabic : correctSourate.name;
            
            const resultText = isCorrect
                ? `${translations[currentLanguage].correct} ${translations[currentLanguage][position]} ${currentName} ${translations[currentLanguage].comes} ${correctName}`
                : `${translations[currentLanguage].incorrect} ${translations[currentLanguage][position]} ${currentName} ${translations[currentLanguage].comes} ${correctName}`;
            
            // Afficher le r√©sultat
            resultElement.textContent = resultText;
            resultElement.className = isCorrect ? 'result correct' : 'result incorrect';
            
            // Mettre √† jour le score
            if (isCorrect) {
                score++;
            }
            totalQuestions++;
        }

        function nextQuestion() {
            // V√©rifier d'abord les r√©ponses si n√©cessaire
            if (!elements.prevInput.disabled && !elements.nextInput.disabled) {
                checkAnswers();
                return;
            }
            
            // Passer √† la question suivante
            currentIndex++;
            
            if (currentIndex < shuffledSourates.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function endQuiz() {
            elements.quizContainer.style.display = 'none';
            elements.startBtn.style.display = 'inline-block';
            elements.restartBtn.style.display = 'inline-block';
            elements.nextBtn.disabled = true;
            
            // Afficher le score final
            elements.scoreDisplay.textContent = `${translations[currentLanguage].quizFinished} ${score}/${totalQuestions}`;
            elements.scoreDisplay.style.display = 'block';
        }

        function updateScore() {
            elements.scoreDisplay.textContent = `${translations[currentLanguage].score} ${score}/${totalQuestions}`;
            elements.scoreDisplay.style.display = 'block';
        }

        function updateProgressBar() {
            const progress = ((currentIndex + 1) / shuffledSourates.length) * 100;
            elements.progressBar.style.width = `${progress}%`;
        }

        function updateResultsDisplay() {
            // Mettre √† jour les textes des r√©sultats si des r√©ponses sont affich√©es
            if (elements.prevResult.textContent.includes(translations['fr'].correct)) {
                updateResultText(elements.prevResult);
            }
            
            if (elements.nextResult.textContent.includes(translations['fr'].correct)) {
                updateResultText(elements.nextResult);
            }
        }

        function updateResultText(resultElement) {
            const parts = resultElement.textContent.split(' ');
            const isCorrect = parts[0] === translations['fr'].correct;
            const position = parts[2] === translations['fr'].after ? 'after' : 'before';
            
            const currentName = currentLanguage === 'ar' ? currentSourate.arabic : currentSourate.name;
            const adjacentNum = position === 'after' ? currentSourate.num + 1 : currentSourate.num - 1;
            const adjacentSourate = sourates.find(s => s.num === adjacentNum);
            const adjacentName = currentLanguage === 'ar' ? adjacentSourate.arabic : adjacentSourate.name;
            
            const newText = isCorrect
                ? `${translations[currentLanguage].correct} ${translations[currentLanguage][position]} ${currentName} ${translations[currentLanguage].comes} ${adjacentName}`
                : `${translations[currentLanguage].incorrect} ${translations[currentLanguage][position]} ${currentName} ${translations[currentLanguage].comes} ${adjacentName}`;
            
            resultElement.textContent = newText;
        }

        // D√©marrer l'application
        init();
    </script>
</body>
</html>
